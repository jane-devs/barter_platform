<img src="https://img.shields.io/badge/Python-3.11-blue?logo=python&logoColor=white&style=for-the-badge" alt="Python 3.11" /><img src="https://img.shields.io/badge/Django-5.2.1-darkgreen?logo=django&logoColor=white&style=for-the-badge" alt="Django 5.2.1" /><img src="https://img.shields.io/badge/DjangoREST-3.16.0-brightgreen?logo=django&logoColor=white&style=for-the-badge" alt="Django REST Framework 3.16.0" /><img src="https://img.shields.io/badge/drf--yasg-1.21.10-yellowgreen?style=for-the-badge" alt="drf-yasg 1.21.10" /><img src="https://img.shields.io/badge/pytest--django-4.11.1-red?style=for-the-badge" alt="pytest-django 4.11.1" />

# Платформа для бартера

Проект выполнен в качестве тестового задания на вакансию Junior Python от компании Effective Mobile.

---

## Оглавление

- [Описание проекта](#описание-проекта)  
- [Основные возможности](#основные-возможности)  
- [Технологии](#технологии)  
- [Установка](#установка)  
- [Запуск проекта](#запуск-проекта)  
- [Использование](#использование)  
- [API и автодокументация](#api-и-автодокументация)  
- [Тестирование](#тестирование)  
- [Автор](#автор)

---

## Описание проекта

**Barter Platform** — веб-приложение, позволяющее пользователям обмениваться товарами без использования денег. Система предлагает удобный интерфейс и API для публикации, поиска и управления объявлениями, а также для оформления и обработки предложений на обмен.

Особенность проекта — реализация двух параллельных способов взаимодействия с системой:  
- через классические Django формы и шаблоны (веб-интерфейс),  
- и через REST API с поддержкой всех основных операций.

---

## Основные возможности

- Регистрация и аутентификация пользователей  
- Создание, редактирование и удаление объявлений  
- Просмотр списка объявлений с:  
  - полнотекстовым поиском по названию и описанию  
  - фильтрацией по категории и состоянию товара  
  - сортировкой по дате создания и другим полям  
  - постраничной навигацией (пагинацией)  
- Предложение обмена товарами между пользователями  
- Принятие и отклонение обменных предложений  
- Управление списком своих объявлений и обменов  
- Раздельный интерфейс для взаимодействия через формы и через API  
- Автоматическая автодокументация REST API с использованием Swagger (drf-yasg)

---

## Технологии

- Python 3.11  
- Django 5.2.1  
- Django REST Framework 3.16.0  
- drf-yasg (Swagger) 1.21.10  
- Django Filters (для удобной фильтрации в API)  
- Bootstrap (для фронтенда)  
- SQLite (для локальной разработки)  
- Pytest и pytest-django (для тестирования)

---

## Установка

1. Клонируйте репозиторий:
```
git clone https://github.com/jane-dev/barter-platform.git
cd barter-platform
```

2. Перейдите в папку barter и создайте в ней .env файл:
```
cd barter
```

3. В .env укажите:
```
DEBUG=True
SECRET_KEY=ваш_секретный_ключ
```

4. Установите зависимости:
```
pip install -r requirements.txt
```

---

## Запуск проекта

1. Примените миграции базы данных:
```
python manage.py migrate
```

2. Создайте суперпользователя (опционально):
```
python manage.py createsuperuser
```

3. Запустите сервер разработки:
```
python manage.py runserver
```

---

## Использование

- Перейдите в браузере по адресу [http://localhost:8000](http://localhost:8000)
- Зарегистрируйтесь или войдите в систему
- Создавайте и редактируйте свои объявления
- Просматривайте объявления других пользователей с фильтрацией и поиском
- Предлагайте обмен и управляйте обменными предложениями
- Для API обращайтесь к эндпоинтам под /api/ (подробнее ниже)

---

## API и автодокументация

- Все основные операции доступны через REST API с URL `/api/ads/`, `/api/exchange/` и т.д.
- Поддерживается:
  - создание, обновление, удаление объявлений
  - фильтрация, поиск и пагинация в списках
  - создание и обработка предложений обмена
- Фильтрация реализована с помощью Django Filters: по категориям, состоянию и поисковым словам
- Пагинация работает по умолчанию, возвращая фиксированное число объектов на страницу
- Для изучения API доступна интерактивная автодокументация Swagger по адресу: [http://localhost:8000/swagger/](http://localhost:8000/swagger/)
- Также доступна документация Redoc: [http://localhost:8000/redoc/](http://localhost:8000/redoc/)

---

## Тестирование

Для запуска тестов используется `pytest` с плагином `pytest-django`.

1. Запустите тесты командой:  
 ```
 pytest -v
 ```

2. В тестах покрываются:

- проверка доступа и авторизации
- создание, редактирование и удаление объявлений через формы и API
- работа фильтров, поиска, пагинации
- валидация форм и логика обменов
- безопасность (запрет редактирования чужих объявлений и т.п.)

---

## Примеры запросов API

### Получить список объявлений с поиском и фильтрацией

```
GET /api/ads/?search=стол&category=furniture&page=2
```

### Создать новое объявление без фото
```
POST /api/ads/
Content-Type: application/json
Authorization: Token your_token_here

{
  "title": "Новый стул",
  "description": "Удобный деревянный",
  "category": "furniture",
  "condition": "new"
}
```

---

## Автор

Евгения Скуратова 
tg:@janedoel